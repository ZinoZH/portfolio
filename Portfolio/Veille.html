<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veille Informatique - Zineddine Hadjab</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1 class="site-title">ğŸ” Veille Informatique</h1>
        <nav class="dropdown">
            <button class="dropbtn">ğŸ” Veille Informatique â‰¡</button>
            <ul class="dropdown-content">
                <li><a href="index.html">ğŸ  Accueil</a></li>
                <li><a href="CV.html">ğŸ“œ Mon CV</a></li>
                <li><a href="Documentations.html">ğŸ“š Documentations</a></li>
                <li><a href="Certifications.html">ğŸ“ Certifications</a></li>
                <li><a href="Projets.html">ğŸ’¡ Mes Projets</a></li>
                <li><a href="Stages.html">ğŸ’¼ Mes Stages</a></li>
                <li><a href="Veille.html">ğŸ” Veille Informatique</a></li>
                <li><a href="Contact.html">ğŸ“© Contact</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <section>
            <h1>ğŸ›¡ï¸ Veille Informatique basÃ©e sur la cybersÃ©curitÃ© et l'IA</h1>
            <p>Voici les derniÃ¨res actualitÃ©s sur l'IA et la cybersÃ©curitÃ© mises Ã  jour en temps rÃ©el :</p>

            <div class="projects-container" id="rss-feed">
                <p>Chargement des articles...</p>
            </div>
        </section>
    </div>

    <footer>
        <p class="footer-b">&copy; 2025 Zineddine Hadjab. Tous droits rÃ©servÃ©s.</p>
    </footer>

    <!-- SCRIPT POUR CHARGER LE FLUX RSS -->
    <script>
    async function chargerRSS() {
        const rssFeedContainer = document.getElementById('rss-feed');
        const fluxRSS = [
            'https://www.zdnet.fr/feeds/rss/actualites/ia/',
            'https://cyberguerre.numerama.com/feed',
        ];

        rssFeedContainer.innerHTML = ""; // On vide le contenu existant

        for (const url of fluxRSS) {
            try {
                const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(url)}`);
                const data = await response.json();

                if (data.status === 'ok') {
                    data.items.slice(0, 3).forEach(article => {
                        const articleElement = document.createElement('div');
                        articleElement.className = "project-card";

                        // Nettoyage du texte et suppression des balises HTML
                        let description = article.description.replace(/(<([^>]+)>)/gi, "").trim();

                        // Suppression des phrases inutiles
                        const phrasesInutiles = [
                            "Le ZDNET Morning", "Retrouvez toutes les actualitÃ©s", "Ne manquez pas", 
                            "Chaque matin Ã  9h00", "Pour en savoir plus", "Les experts analysent",
                            "DÃ©couvrez les nouveautÃ©s", "L'essentiel de l'actu tech"
                        ];
                        phrasesInutiles.forEach(phrase => {
                            if (description.startsWith(phrase)) {
                                description = description.replace(phrase, "").trim();
                            }
                        });

                        // Reformulation de la description
                        let phrases = description.split(". ");
                        let descriptionReformulee = (phrases.length > 1) 
                            ? `${phrases[0]}. ${phrases[1]}.` 
                            : description;

                        // RÃ©cupÃ©ration de l'image
                        let imageUrl = "default-image.jpg"; // Image par dÃ©faut

                        if (article.enclosure && article.enclosure.link && article.enclosure.link.includes("http")) {
                            imageUrl = article.enclosure.link; // Image depuis l'article
                        } else if (article.content) {
                            let imgMatch = article.content.match(/<img[^>]+src="([^">]+)"/);
                            if (imgMatch) {
                                imageUrl = imgMatch[1]; // Extraction de la premiÃ¨re image trouvÃ©e
                            }
                        }

                        // VÃ©rification spÃ©cifique pour Numerama
                        if (imageUrl === "default-image.jpg" && article.link.includes("numerama.com")) {
                            console.log("âš ï¸ Aucun image trouvÃ©e dans le RSS pour Numerama : " + article.link);
                        }

                        // Insertion du contenu dans le HTML
                        articleElement.innerHTML = `
                            <div class="project-img">
                                <a href="${article.link}" target="_blank">
                                    <img src="${imageUrl}" alt="Illustration de l'article" onerror="this.onerror=null;this.src='default-image.jpg';">
                                </a>
                            </div>
                            <div class="project-content">
                                <h2>${article.title}</h2>
                                <p>${descriptionReformulee}</p>
                                <div class="btn-group">
                                    <a href="${article.link}" target="_blank" class="btn btn-preview">ğŸ”— Lire l'article complet</a>
                                </div>
                            </div>
                        `;
                        rssFeedContainer.appendChild(articleElement);
                    });
                }
            } catch (error) {
                console.error("âŒ Erreur lors du chargement du flux RSS :", error);
            }
        }
    }

    document.addEventListener("DOMContentLoaded", chargerRSS);
</script>

